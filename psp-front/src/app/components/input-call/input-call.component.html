<p>Вызовы / Новый вызов</p>
<div class="row">
    <div class="col-md-auto">
        <div class="left-content-area">
            <form #myForm="ngForm" #signupForm = "ngForm" [formGroup]="callForm" (change)="saveCookies()">     

                <div class="row">
                    <div class="col">    
                    <div class="input-block">
                            Первичная информация
                            <input class="form-control" formControlName="info"  type="text"   name="info" required  />        
                    </div>

                    <div class="input-block">
                        <div class="row">
                                <div class="col">
                                    Время
                                    <input class="form-control" formControlName="time" type="time"   name="time"   required/> 
                                </div>
                                <div class="col">
                                    Дата
                                    <input class="form-control" formControlName="date"  type="date"   name="date"  required /> 
                                </div>
                            </div>
                    </div>

                    <div class="input-block">
                            Кто выслал
                            <input class="form-control" formControlName="whoSend" type="text"   name="whoSend"  required /> 
                    </div>

                    <div class="input-block">
                            Кто принял
                            <input class="form-control" formControlName="whoAccept" type="text"   name="whoAccept"  required /> 
                    </div>
                            
                    <div class="input-block">
                            Адрес
                            <ngx-dadata  [config]="configAddress" formControlName="address" name="address" 
                                (selected)="onAddressSelected($event)" id="address" required ></ngx-dadata>
                    </div>

                    <div class="input-block">
                    
                            <div class="row">
                                <div class="col">
                                    
                                    <input class="form-control" formControlName="time_gone" type="time"   name="time_gone"  required />
                                </div>

                                <div class="col">
                                    <button class="btn btn-warning offset-md-4" type="submit" (click)="setTimeToFormControl('time_gone')">Выезд</button>
                                </div>
                            
                                <div class="col">
                                    <input class="form-control" formControlName="time_arrive" type="time"   name="time_arrive"  required /> 
                                </div>

                                <div class="col">
                                    <button class="btn btn-warning offset-md-2" type="submit" (click)="setTimeToFormControl('time_arrive')">Прибытие</button>
                                </div>

                            </div>

                            <div class="row">

                                <div class="col">
                                    <input class="form-control" formControlName="time_local" type="time"   name="time_local"  required />
                                </div>

                                <div class="col">
                                    <button class="btn btn-warning offset-md-2" type="submit" (click)="setTimeToFormControl('time_local')">Локализация</button>
                                </div>

                                <div class="col">
                                    <input class="form-control" formControlName="time_destroy" type="time"   name="time_destroy"  required /> 
                                </div>

                                <div class="col">
                                    <button class="btn btn-warning offset-md-2" type="submit" (click)="setTimeToFormControl('time_destroy')">Устранение</button>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <input class="form-control" formControlName="time_back" type="time"   name="time_back"  required />
                                </div>
                                <div class="col">
                                    <button class="btn btn-warning offset-md-2" type="submit" (click)="setTimeToFormControl('time_back')">Возвращение</button>
                                </div>
                            </div>
                    </div>

                    <div class="input-block">
                            Информация
                            <input class="form-control" formControlName="info_local" type="text"   name="info_local"  required />    
                    </div>

                    <div class="input-block">
                        <div class="row">
                                <div class="col">
                                    Погибло
                                    <input class="form-control" formControlName="died" type="number"   name="died"  required />      
                                </div>

                                <div class="col">
                                    Спасено
                                    <input class="form-control" formControlName="saved" type="number"   name="saved"   required/>        
                                </div>

                                <div class="col">
                                    Пострадало
                                    <input class="form-control" formControlName="affected" type="number"   name="affected"  required />        
                                </div>
                        </div>
                    </div>

                        <!-- ! input personal       -->
                    <div class="input-block">
                        <mat-form-field class="example-chip-list">
                            <mat-chip-list #chipList>
                                <mat-chip *ngFor="let worker of workers;let indx=index;" [selectable]="selectable" [removable]="removable" (removed)="remove(worker,indx)">
                                    {{worker.last_name}}
                                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                                </mat-chip>
                                <input placeholder="New fruit..." #workerInput [formControl]="WorkersCtrl" [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
                            </mat-chip-list>
                            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                                <mat-option *ngFor="let worker of filteredWorkers | async" [value]="worker">
                                    {{worker.last_name}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>

                        <pre>{{workers|json}}</pre>
                    </div>
                        <!-- !end -->
                    
                    <div class="input-block">
                        <button class="btn btn-primary" type="submit" (click)="save(calls)" [disabled]="!signupForm.form.valid">  Ввод </button>
                    </div>
                    
                    


                    </div>

                    
                </div>
            </form>  
        </div>
    </div>

    <div class="col">
        <div class="right-content-area">
    <!--- Yandex maps block -->
            <div id="map" class="map"></div>
        </div>
    </div>
</div>